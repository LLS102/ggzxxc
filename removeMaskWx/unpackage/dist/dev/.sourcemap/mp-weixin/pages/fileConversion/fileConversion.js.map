{"version":3,"sources":["uni-app:///main.js","webpack:///D:/codeProject/llgululu-de-watermark/removeMaskWx/pages/fileConversion/fileConversion.vue?d6bb","webpack:///D:/codeProject/llgululu-de-watermark/removeMaskWx/pages/fileConversion/fileConversion.vue?4f13","webpack:///D:/codeProject/llgululu-de-watermark/removeMaskWx/pages/fileConversion/fileConversion.vue?598c","webpack:///D:/codeProject/llgululu-de-watermark/removeMaskWx/pages/fileConversion/fileConversion.vue?7738","uni-app:///pages/fileConversion/fileConversion.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","file","conversionType","conversionTypeName","conversionTypes","uploadUrl","downloadUrl","methods","chooseFile","uni","count","extension","success","console","fail","title","icon","handleConversionTypeChange","handleUpload","e","url","filePath","name","header","token","formData","type"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;;;AAG7D;AAC+L;AAC/L,gBAAgB,sMAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuvB,CAAgB,qvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmB3wB;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MAAA;MACAC;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;UACA;UACAC;QACA;QACAC;UACAL;YACAM;YACAC;UACA;UACAH;QACA;MAGA;IACA;IACA;IACAI;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAC;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;;MAGA;MACAN;MACA;MACAJ;QACAW;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;UACAC;QACA;QACAC;UACAvB;QACA;;QACAU;UACA;YACA;YACA;cACAc;YACA;YACA;YACAjB;cACAM;cACAC;YACA;UACA;YACAP;cACAM;cACAC;YACA;UACA;QACA;QACAF;UACAL;YACAM;YACAC;UACA;UACAH;QACA;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/fileConversion/fileConversion.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/fileConversion/fileConversion.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./fileConversion.vue?vue&type=template&id=fd6992f4&\"\nvar renderjs\nimport script from \"./fileConversion.vue?vue&type=script&lang=js&\"\nexport * from \"./fileConversion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/fileConversion/fileConversion.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileConversion.vue?vue&type=template&id=fd6992f4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileConversion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileConversion.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 文件选择 -->\r\n\t\t<button @click=\"chooseFile\">选择文件</button>\r\n\r\n\t\t<!-- 转换类型选择 -->\r\n\t\t<picker mode=\"selector\" :range=\"conversionTypes\" @change=\"handleConversionTypeChange\">\r\n\t\t\t<view class=\"picker\">选择转换类型: {{ conversionTypeName }}</view>\r\n\t\t</picker>\r\n\r\n\t\t<!-- 上传按钮 -->\r\n\t\t<button type=\"submit\" @click=\"handleUpload\">上传并转换</button>\r\n\r\n\t\t<!-- 下载链接 -->\r\n\t\t<a v-if=\"downloadUrl\" :href=\"downloadUrl\" download=\"converted-file.pdf\">点击下载转换后的文件</a>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfile: null, // 选择的文件\r\n\t\t\t\tconversionType: 1, // 默认转换类型\r\n\t\t\t\tconversionTypeName: 'Word 转 PDF', // 默认类型名称\r\n\t\t\t\tconversionTypes: ['Word 转 PDF', 'PDF 转 Word'],\r\n\t\t\t\tuploadUrl: 'http://127.0.0.1:8004/api/upload/file', // 后端接口路径\r\n\t\t\t\tdownloadUrl: null, // 下载链接\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 选择文件\r\n\t\t\tchooseFile() {\r\n\t\t\t\tuni.chooseMessageFile({\r\n\t\t\t\t\tcount: 1, //一次可以上传多少个\r\n\t\t\t\t\t// type: 'file', \r\n\t\t\t\t\textension: ['.doc', '.pdf', '.docx'], //文件类型\r\n\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\tthis.file = res.tempFiles[0]; // 获取文件\r\n\t\t\t\t\t\tconsole.log('文件选择成功', this.file);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '文件选择失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 处理转换类型选择\r\n\t\t\thandleConversionTypeChange(e) {\r\n\t\t\t\tthis.conversionType = e.target.value;\r\n\t\t\t\tthis.conversionTypeName = this.conversionTypes[this.conversionType];\r\n\t\t\t},\r\n\t\t\t// 处理文件上传\r\n\t\t\thandleUpload(e) {\r\n\t\t\t\te.preventDefault(); // 防止表单提交页面刷新\r\n\r\n\t\t\t\t// if (!this.file) {\r\n\t\t\t\t// \tuni.showToast({\r\n\t\t\t\t// \t\ttitle: '请选择一个文件',\r\n\t\t\t\t// \t\ticon: 'none',\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\r\n\r\n\t\t\t\tlet token = uni.getStorageSync('token');\r\n\t\t\t\tconsole.log(this.file)\r\n\t\t\t\t// 使用 uni.uploadFile 上传文件\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: this.uploadUrl, // 上传的服务器地址\r\n\t\t\t\t\tfilePath: this.file.path, // 选择的文件路径\r\n\t\t\t\t\tname: 'file', // 后端接收文件的字段名\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\ttoken: token,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\tconversionType: this.conversionType, // 转换类型\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (response) => {\r\n\t\t\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\t\t\t// 后端返回转换后的文件字节流\r\n\t\t\t\t\t\t\tconst blob = new Blob([response.data], {\r\n\t\t\t\t\t\t\t\ttype: 'application/pdf'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.downloadUrl = URL.createObjectURL(blob);\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '文件转换成功',\r\n\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '文件转换失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '文件上传失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>"],"sourceRoot":""}